<html><head><meta charset="UTF-8"><link rel="import" href="my-app.html"></head><body><dom-module id="my-timeline">
    <template>
        <style include="shared-styles">
             :host {
                display: block;
            }

            .card {
                margin: 34px;
            }

            paper-search-bar {
                --input-font-size: 20px;
            }
        </style>

        <div class="card">
            <paper-search-bar id="searchBar" hide-filter-button="true" placeholder="Enter search term" on-paper-search-search="search"></paper-search-bar>
        </div>

        <paper-spinner active$="[[loading]]"></paper-spinner>

        <my-noresult-view active$="[[empty]]"></my-noresult-view>

        <iron-ajax id="ajax" auto="" url="https://www.googleapis.com/youtube/v3/search" params$="{&quot;part&quot;:&quot;snippet&quot;, &quot;q&quot;:&quot;{{textSearched}}&quot;, &quot;key&quot;: &quot;AIzaSyAuecFZ9xJXbGDkQYWBmYrtzOGJD-iDIgI&quot;, &quot;type&quot;: &quot;video&quot;}" handle-as="json" on-response="hresponse" debounce-duration="300"></iron-ajax>

        <template is="dom-repeat" items="{{videoItems}}" as="item">
            <my-youtube-video stored-favs="{{storedFavs}}" hidden="[[loading]]" liked="{{item.isFav}}" video-id="{{item.id.videoId}}" video-description="{{item.snippet.description}}" video-title="{{item.snippet.title}}"></my-youtube-video>
        </template>

    </template>
    <script>Polymer({is:"my-timeline",properties:{textSearched:{type:String,value:"polymer"},loading:{type:Boolean,value:!0},empty:{type:Boolean,value:!1},storedFavs:{type:Array,notify:!0}},ready:function(){this.videoItems=[],console.log("storedFavs: "+this.storedFavs)},search:function(){var e=this.$.searchBar.query;e&&(this.videoItems=[],this.loading=!0,this.textSearched=e)},hresponse:function(e){var s=e.detail.response.items;if(s.length||(this.empty=!0),this.storedFavs&&this.storedFavs.length)for(var t=0;t<s.length;t++)this.storedFavs.indexOf(s[t].id.videoId)>=0?(console.log("fav"),s[t].isFav=!0):(console.log("no fav"),s[t].isFav=!1),this.push("videoItems",s[t]);else for(var t=0;t<s.length;t++)s[t].isFav=!1,this.push("videoItems",s[t]);this.loading=!1}});</script>
</dom-module>
</body></html>